{"title":"Everything about HashMap(1)","date":"2020-03-16T15:49:44.000Z","date_formatted":{"ll":"Mar 16, 2020","L":"03/16/2020","MM-DD":"03-16"},"thumbnail":"https://img.cdn.n3ko.co/lsky/2020/03/17/4094fa0d49806.png?x-oss-process=image/auto-orient,1/quality,q_70/sharpen,200/format,webp","link":"2020/03/16/Everything-about-HashMap-1","comments":true,"tags":["Java","data structure"],"categories":["Programming"],"updated":"2020-03-20T14:03:00.053Z","content":"<h3 id=\"hashmap-inner-data-structure\">HashMap Inner Data Structure<a href=\"#hashmap-inner-data-structure\" title=\"HashMap Inner Data Structure\"></a></h3><p>For JDK 1.8 and above, HashMap uses  <code>Array</code> ,<code>List</code> and <code>red-black tree</code>. When the length of the list is more than 8 and the size of array is no smaller than 64, HashMap stores the key-value patterns in <code>red-black tree</code>. Otherwise the data is stored in a <code>list</code> instead.</p>\n<h3 id=\"how-k-v-pattern-is-inserted-into-a-hashmap\">How K-V Pattern is inserted into a HashMap<a href=\"#how-k-v-pattern-is-inserted-into-a-hashmap\" title=\"How K-V Pattern is inserted into a HashMap\"></a></h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Map&lt;String,Integer&gt; hashmap = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br></pre></td></tr></table></figure>\n\n<ol><li>Initialize HashMap if its null.</li>\n<li>Get the hash value of the key. <code>(n-1) &amp; hash</code> should be mark  as the index of array. n is the current size of map.</li>\n<li>If <code>array[index]</code> is empty, create a node and store the value here.</li>\n<li>Otherwise, <strong>hash collision</strong> occurs. Compare the keys of the two. If equals, replace the original value with the new one.</li>\n<li>If the keys are not the same,  see if the current node type is a tree node. If so, new a tree node and insert it into the <code>red-black tree</code>.</li>\n<li>If the current node type is a list node, new an ordinary node and insert it into the list. If the current length of the list is larger than 8, then the list will be transferred into a red-black tree.</li>\n<li>After the insert finishes, enlarge the capacity of the array if the node number is larger than a certain value.</li>\n</ol><p><img src=\"https://img.cdn.n3ko.co/lsky/2020/03/17/b308a381a5fc6.png?x-oss-process=image/auto-orient,1/quality,q_70/sharpen,200/format,webp\" class=\"Ï†cy\" alt=\"hashmap-insert\"></p>\n<blockquote>\n<p>Series contents are largely borrowed from <a href=\"https://juejin.im/post/5e6e0ac9e51d4526fb5df679\" target=\"_blank\">https://juejin.im/post/5e6e0ac9e51d4526fb5df679</a> </p>\n</blockquote>\n","prev":{"title":"Everything about HashMap(2)","link":"2020/03/18/Everything-about-HashMap-2"},"next":{"title":"Skip List","link":"2020/03/07/sk-1"},"plink":"https://git.michaelsblog.top/2020/03/16/Everything-about-HashMap-1/","toc":[{"id":"hashmap-inner-data-structure","title":"HashMap Inner Data Structure","index":"1"},{"id":"how-k-v-pattern-is-inserted-into-a-hashmap","title":"How K-V Pattern is inserted into a HashMap","index":"2"}]}